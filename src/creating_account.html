<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/e588cb9d47.js"
      crossorigin="anonymous"></script>
    <link rel="icon" type="image/png"
      href="path/images/logocoop-removebg-preview 2.png">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Facebook SDK -->
    <script async defer crossorigin="anonymous"
      src="https://connect.facebook.net/en_US/sdk.js"></script>
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="../src/javascript/index.js"></script>
     <link href="./output.css" rel="stylesheet">
    <title>Register | GBLDC</title>
  </head>
  <body
    class="bg-gray-50 flex items-center justify-center min-h-screen font-sans p-4">
    
    <!-- Registration Section - Now showing first -->
    <div id="registerSection"
      class="bg-white w-full max-w-6xl flex flex-col lg:flex-row rounded-2xl shadow-xl overflow-hidden mx-auto">
      <!-- Left Side: Illustration -->
      <div class="hidden lg:flex w-full lg:w-1/2 bg-green-500 relative items-center justify-center">
        <img src="path/images/gbldc-login.png" alt="Loan Illustration"
          class="object-cover w-full h-full">
      </div>
      <!-- Right Side: Registration Form -->
      <div class="w-full lg:w-1/2 p-6 sm:p-8 lg:p-10 flex flex-col justify-between">
        <div>
          <img src="path/images/logocoop-removebg-preview 2.png"
            alt="GBLDC Logo" class="w-20 h-20 sm:w-24 sm:h-24 mb-6 mx-auto"
            style="image-rendering: auto;">
          <h2 class="text-xl sm:text-2xl font-bold mb-6 text-center text-green-600">Create
            Account</h2>
          <p class="text-sm text-gray-700 mb-6 sm:mb-8 text-center">
            Join GBLDC to easily manage your loans, track your finances, and
            access exclusive member benefits. Fill out the form below to get
            started.
          </p>
          <form class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
            <div class="col-span-1">
              <label class="block text-sm text-gray-600 mb-1">First Name</label>
              <input type="text" placeholder="First Name"
              class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            </div>
            <div class="col-span-1">
              <label class="block text-sm text-gray-600 mb-1">Last Name</label>
              <input type="text" placeholder="Last Name"
              class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            </div>
            <div class="col-span-1 sm:col-span-2">
              <label class="block text-sm text-gray-600 mb-1">Email
                Address</label>
              <input type="email" placeholder="example@mail.com"
                class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            </div>
            <div class="col-span-1 sm:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">
              <div>
                <label class="block text-sm text-gray-600 mb-1">Password</label>
                <input type="password" placeholder="••••••••"
                  class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
              </div>
              <div>
                <label class="block text-sm text-gray-600 mb-1">Confirm
                  Password</label>
                <input type="password" placeholder="••••••••"
                  class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
              </div>
            </div>
            <!-- Terms and Conditions (full width) -->
            <div class="col-span-1 sm:col-span-2 flex items-start">
              <input type="checkbox" id="terms" required class="mt-1 mr-2">
              <label for="terms" class="text-sm text-gray-700">I confirm that
                all information provided is true and I agree to the <a href="#"
                  class="text-green-700 underline">Terms & Conditions</a> of
                GBLDC.</label>
            </div>
            <div class="col-span-1 sm:col-span-2">
              <button type="button"
                class="w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700"
                onclick="showOtpSection();">
                Continue
              </button>
            </div>
          </form>
          <p class="text-sm text-gray-600 text-center mt-4">
            Already have an account?
            <a href="#" onclick="showLoginSection();"
              class="text-green-600 hover:underline">Log in</a>
          </p>
        </div>
        <p class="text-xs text-gray-400 text-center mt-6 sm:mt-10 italic">©2025 Greater Bulacan
          Livelihood Development Cooperative</p>
      </div>
    </div>

    <!-- Login Section - Now hidden initially -->
    <div id="loginSection"
      class="bg-white w-full max-w-6xl flex flex-col lg:flex-row rounded-2xl shadow-xl overflow-hidden hidden invisible pointer-events-none">

      <!-- Left Side: Login Form -->
      <div id="loginSect" class="w-full lg:w-1/2 p-6 sm:p-8 lg:p-10 flex flex-col justify-between">
        <!-- Logo -->
        <div>
          <img src="path/images/logocoop-removebg-preview 2.png"
            alt="GBLDC Logo" class="w-20 h-20 sm:w-24 sm:h-24 mb-6 mx-auto"
            style="image-rendering: auto;">
          <h2
            class="text-xl sm:text-2xl font-bold mb-2 text-center text-green-600 tracking-wide">
            Welcome to GBLDC
          </h2>
          <p class="text-sm text-gray-800 mb-6 sm:mb-8 text-center">Securely
            access your account to manage your loans and finances.</p>

          <form class="space-y-4 sm:space-y-6">
            <div>
              <label class="text-sm text-gray-600">Email Address</label>
              <input type="email" placeholder="example@mail.com"
                class="w-full mt-1 px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            </div>
            <div>
              <label class="text-sm text-gray-600">Password</label>
              <input type="password" placeholder="••••••••"
                class="w-full mt-1 px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
              <div class="text-right mt-1">
                <a href="#" class="text-sm text-green-600 hover:underline"
                  id="forgotPasswordLink">Forgot Password?</a>
              </div>
            </div>
            <button
              type="button"
              class="w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700"
              onclick="validateLoginFields()">
              Log in
            </button>
            <div class="flex flex-col sm:flex-row gap-4">
              <button onclick="fbLogin()" type="button"
                class="flex-1 border border-blue-600 text-blue-600 py-2 rounded-md hover:bg-blue-100 flex items-center justify-center gap-2 text-sm">
                <img
                  src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/facebook/facebook-original.svg"
                  class="h-5" alt="Facebook">
                <span class="hidden sm:inline">Log in with Facebook</span>
                <span class="sm:hidden">Facebook</span>
              </button>
              <button id="googleLoginBtn"
                type="button"
                class="flex-1 border border-red-600 text-red-600 py-2 rounded-md hover:bg-red-100 flex items-center justify-center gap-2 text-sm">
                <img
                  src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/google/google-original.svg"
                  class="h-5" alt="Google">
                <span class="hidden sm:inline">Log in with Google</span>
                <span class="sm:hidden">Google</span>
              </button>
            </div>
          </form>
          <p class="text-sm text-gray-600 mt-4 sm:mt-6 text-center">
            Don't have an account?
            <a href="#" class="text-green-600 hover:underline"
              onclick="event.preventDefault(); showRegisterSection();">Create an
              account</a>
          </p>
        </div>

        <p class="text-xs text-gray-400 text-center mt-6 sm:mt-10 italic">©2025 Greater Bulacan
          Livelihood Development Cooperative</p>
      </div>
      <!-- Right Side: Illustration (for login only) -->
      <div class="hidden lg:flex w-full lg:w-1/2 bg-green-500 relative items-center justify-center">
        <img src="path/images/gbldc-login.png" alt="Loan Illustration"
          class="object-cover w-full h-full">
      </div>
    </div>

    <!-- Forgot Password Section -->
    <div id="forgotPasswordSection"
      class="bg-white w-full max-w-6xl flex flex-col lg:flex-row rounded-2xl shadow-xl overflow-hidden mx-auto hidden invisible pointer-events-none">
      <!-- Left Side: Illustration -->
      <div class="hidden lg:flex w-full lg:w-1/2 bg-green-500 relative items-center justify-center">
        <img src="path/images/gbldc-forgot-password.jpg" alt="Loan Illustration"
          class="object-cover w-full h-full">
      </div>
      <!-- Right Side: Forgot Password Form -->
      <div class="w-full lg:w-1/2 p-6 sm:p-8 lg:p-10 flex flex-col justify-between">
        <div>
          <img src="path/images/logocoop-removebg-preview 2.png"
            alt="GBLDC Logo" class="w-20 h-20 sm:w-24 sm:h-24 mb-6 mx-auto"
            style="image-rendering: auto;">
          <h2 class="text-xl sm:text-2xl font-bold mb-6 text-center text-green-600">Forgot
            Password</h2>
          <p class="text-sm text-gray-700 mb-6 sm:mb-8 text-center">
            Enter your registered email address and we'll send you a link to
            reset your password.
          </p>
          <form id="forgotPasswordForm" class="space-y-4 sm:space-y-6">
            <div>
              <label class="block text-sm text-gray-600 mb-1">Email
                Address</label>
              <input type="email" id="forgotPasswordEmail" placeholder="example@mail.com" required
                class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            </div>
            <button type="button" onclick="sendForgotPasswordLink();"
              class="w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700">
              Send Reset Link
            </button>
          </form>
          <p class="text-sm text-gray-600 text-center mt-4">
            Remembered your password?
            <a href="#" onclick="showLoginSection();"
              class="text-green-600 hover:underline">Log in</a>
          </p>
        </div>
        <p class="text-xs text-gray-400 text-center mt-6 sm:mt-10 italic">©2025 Greater Bulacan
          Livelihood Development Cooperative</p>
      </div>
    </div>

    <!-- Forgot Password OTP Section -->
    <div id="forgotPasswordOtpSection"
      class="bg-white w-full max-w-6xl flex flex-col lg:flex-row rounded-2xl shadow-xl overflow-hidden mt-10 mx-auto hidden invisible pointer-events-none">
      <!-- Left Side: Illustration -->
      <div class="hidden lg:flex w-full lg:w-1/2 bg-green-500 relative items-center justify-center">
        <img src="path/images/gbldc-verify-account.jpg" alt="OTP Verification Illustration"
          class="object-cover w-full h-full shadow-2xl">
      </div>
      <!-- Right Side: OTP Form -->
      <div class="w-full lg:w-1/2 p-6 sm:p-8 lg:p-10 flex flex-col justify-between">
        <div>
          <img src="path/images/logocoop-removebg-preview 2.png"
            alt="GBLDC Logo" class="w-20 h-20 sm:w-24 sm:h-24 mb-6 mx-auto"
            style="image-rendering: auto;">
          <h2 class="text-xl sm:text-2xl font-bold mb-6 text-center text-green-600">Verify
            Your Email</h2>
          <p class="text-sm text-gray-700 mb-6 sm:mb-8 text-center">
            Enter the 6-digit code sent to your email address to reset your password.<br>
            <span id="forgotPasswordOtpEmailHint"
              class="block text-xs text-gray-500 mt-2"></span>
          </p>
          <form id="forgotPasswordOtpForm" class="space-y-4 sm:space-y-6">
            <div class="flex justify-center gap-1 sm:gap-2 mb-4">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl forgot-password-otp-input"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl forgot-password-otp-input"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl forgot-password-otp-input"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl forgot-password-otp-input"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl forgot-password-otp-input"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl forgot-password-otp-input"
                inputmode="numeric" pattern="[0-9]*">
            </div>
            <button type="submit"
              class="w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700">Verify</button>
            <p class="text-sm text-gray-600 text-center">
              Didn't receive the code?
              <a href="#" id="forgotPasswordOtpResend"
                class="text-green-600 hover:underline">Resend</a>
            </p>
          </form>
        </div>
        <p class="text-xs text-gray-400 text-center mt-6 sm:mt-10 italic">©2025 Greater Bulacan
          Livelihood Development Cooperative</p>
      </div>
    </div>
    <!-- OTP Section (for login verification) -->
    <div id="loginOtpSection"
      class="bg-white w-full max-w-6xl flex flex-col lg:flex-row rounded-2xl shadow-xl overflow-hidden mt-10 mx-auto hidden invisible pointer-events-none">
      <!-- Left Side: Illustration -->
      <div class="hidden lg:flex w-full lg:w-1/2 bg-green-500 relative items-center justify-center">
        <img src="path/images/gbldc-verify-account.jpg"
          alt="OTP Verification Illustration"
          class="object-cover w-full h-full shadow-2xl">
      </div>
      <!-- Right Side: OTP Form -->
      <div class="w-full lg:w-1/2 p-6 sm:p-8 lg:p-10 flex flex-col justify-between">
        <div>
          <img src="path/images/logocoop-removebg-preview 2.png"
            alt="GBLDC Logo" class="w-20 h-20 sm:w-24 sm:h-24 mb-6 mx-auto"
            style="image-rendering: auto;">
          <h2 class="text-xl sm:text-2xl font-bold mb-6 text-center text-green-600">Verify
            Login</h2>
          <p class="text-sm text-gray-700 mb-6 sm:mb-8 text-center">
            Enter the 6-digit code sent to your email or phone to complete your
            login.<br>
            <span id="otpEmailHint"
              class="block text-xs text-gray-500 mt-2">Example:
              juandelacruz@gmail.com</span>
          </p>
          <form id="loginOtpForm" class="space-y-4 sm:space-y-6">
            <div class="flex justify-center gap-1 sm:gap-2 mb-4">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
            </div>
            <button type="submit"
              class="w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700">Verify</button>
            <p class="text-sm text-gray-600 text-center">
              Didn't receive the code?
              <a href="#" id="loginOtpResend"
                class="text-green-600 hover:underline">Resend</a>
            </p>
            <p class="text-sm text-gray-600 text-center">
              <a href="#" onclick="showLoginSection();"
                class="text-green-600 hover:underline">Back to Login</a>
            </p>
          </form>
        </div>
        <p class="text-xs text-gray-400 text-center mt-6 sm:mt-10 italic">©2025 Greater Bulacan
          Livelihood Development Cooperative</p>
      </div>
    </div>

    <!-- OTP Section -->
    <div id="otpSection"
      class="bg-white w-full max-w-6xl flex flex-col lg:flex-row rounded-2xl shadow-xl overflow-hidden mt-10 mx-auto hidden invisible pointer-events-none">
      <!-- Left Side: Illustration -->
      <div class="hidden lg:flex w-full lg:w-1/2 bg-green-500 relative items-center justify-center">
        <img src="path/images/gbldc-verify-account.jpg" alt="Loan Illustration"
          class="object-cover w-full h-full">
      </div>
      <!-- Right Side: OTP Form -->
      <div class="w-full lg:w-1/2 p-6 sm:p-8 lg:p-10 flex flex-col justify-between">
        <div>
          <img src="path/images/logocoop-removebg-preview 2.png"
            alt="GBLDC Logo" class="w-20 h-20 sm:w-24 sm:h-24 mb-6 mx-auto"
            style="image-rendering: auto;">
          <h2 class="text-xl sm:text-2xl font-bold mb-6 text-center text-green-600">Verify
            Your Email</h2>
          <p class="text-sm text-gray-700 mb-6 sm:mb-8 text-center">
            Enter the 6-digit code sent to your email address to complete your
            registration.
          </p>
          <form class="space-y-4 sm:space-y-6">
            <div class="flex justify-center gap-1 sm:gap-2 mb-4">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
              <input type="text" maxlength="1"
                class="w-10 h-10 sm:w-12 sm:h-12 text-center border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-xl sm:text-2xl"
                inputmode="numeric" pattern="[0-9]*">
            </div>
            <button type="submit"
              class="w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700">Verify</button>
            <p class="text-sm text-gray-600 text-center">
              Didn't receive the code?
              <a href="#" class="text-green-600 hover:underline">Resend</a>
            </p>
            <p class="text-sm text-gray-600 text-center">
              Want to use a different email?
              <a href="#" onclick="event.preventDefault(); showRegisterSection();"
                class="text-green-600 hover:underline">Back to Registration</a>
            </p>
          </form>
        </div>
        <p class="text-xs text-gray-400 text-center mt-6 sm:mt-10 italic">©2025 Greater Bulacan
          Livelihood Development Cooperative</p>
      </div>
    </div>
  </div>

<script>
function showRegisterSection() {
  const reg = document.getElementById("registerSection");
  const login = document.getElementById("loginSection");
  const otp = document.getElementById("otpSection");
  const loginOtp = document.getElementById("loginOtpSection");
  const forgot = document.getElementById("forgotPasswordSection");
  const forgotOtp = document.getElementById("forgotPasswordOtpSection");

  // Hide all other sections
  [login, otp, loginOtp, forgot, forgotOtp].forEach((section) => {
    if (section) {
      section.classList.add("hidden", "invisible", "pointer-events-none");
      section.style.display = "none";
    }
  });

  // Show registration section
  if (reg) {
    reg.classList.remove("hidden", "invisible", "pointer-events-none");
    reg.style.display = "flex";
    reg.style.opacity = 0;
    reg.style.transition = "opacity 0.5s";
    setTimeout(() => {
      reg.style.opacity = 1;
    }, 10);
    reg.scrollIntoView({ behavior: "smooth", block: "center" });
  }
}

// New function to show login section
function showLoginSection() {
  const login = document.getElementById("loginSection");
  const reg = document.getElementById("registerSection");
  const otp = document.getElementById("otpSection");
  const loginOtp = document.getElementById("loginOtpSection");
  const forgot = document.getElementById("forgotPasswordSection");
  const forgotOtp = document.getElementById("forgotPasswordOtpSection");

  // Hide all other sections
  [reg, otp, loginOtp, forgot, forgotOtp].forEach((section) => {
    if (section) {
      section.classList.add("hidden", "invisible", "pointer-events-none");
      section.style.display = "none";
    }
  });

  // Show login section
  if (login) {
    login.classList.remove("hidden", "invisible", "pointer-events-none");
    login.style.display = "flex";
    login.style.opacity = 0;
    login.style.transition = "opacity 0.5s";
    setTimeout(() => {
      login.style.opacity = 1;
    }, 10);
    login.scrollIntoView({ behavior: "smooth", block: "center" });
  }
}

// Modified scrollToLogin function to use showLoginSection
function scrollToLogin() {
  showLoginSection();
}

function showForgotPasswordSection() {
  const forgot = document.getElementById("forgotPasswordSection");
  const login = document.getElementById("loginSection");
  const reg = document.getElementById("registerSection");
  const otp = document.getElementById("otpSection");
  const loginOtp = document.getElementById("loginOtpSection");
  const forgotOtp = document.getElementById("forgotPasswordOtpSection");

  // Hide all other sections
  [login, reg, otp, loginOtp, forgotOtp].forEach((section) => {
    if (section) {
      section.classList.add("hidden", "invisible", "pointer-events-none");
      section.style.display = "none";
    }
  });

  // Show forgot password section
  if (forgot) {
    forgot.classList.remove("hidden", "invisible", "pointer-events-none");
    forgot.style.display = "flex";
    forgot.style.opacity = 0;
    forgot.style.transition = "opacity 0.5s";
    setTimeout(() => {
      forgot.style.opacity = 1;
    }, 10);
    forgot.scrollIntoView({ behavior: "smooth", block: "center" });
  }
}

function validateLoginFields() {
  const email = document.querySelector(
    '#loginSection input[type="email"][placeholder="example@mail.com"]'
  );
  const password = document.querySelector(
    '#loginSection input[type="password"][placeholder="••••••••"]'
  );
  const emailValue = email.value.trim();
  const passwordValue = password.value.trim();

  // Simple email format check
  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  if (!emailValue && !passwordValue) {
    Swal.fire({
      icon: "warning",
      iconColor: "#dc2626",
      color: "#1e2939",
      title: "Missing Fields",
      text: "Please fill both Email Address and Password fields.",
    });
  } else if (!emailValue && passwordValue) {
    Swal.fire({
      icon: "warning",
      iconColor: "#dc2626",
      color: "#1e2939",
      title: "Missing Email",
      text: "Please enter your email address.",
    });
  } else if (emailValue && !passwordValue) {
    Swal.fire({
      icon: "warning",
      iconColor: "#dc2626",
      color: "#1e2939",
      title: "Missing Password",
      text: "Please enter your password.",
    });
  } else if (!emailPattern.test(emailValue)) {
    Swal.fire({
      icon: "warning",
      iconColor: "#dc2626",
      color: "#1e2939",
      title: "Invalid Email",
      text: "Please enter a valid email address.",
    });
  } else {
    // Proceed with login (show OTP section for login verification)
    Swal.fire({
      icon: "success",
      iconColor: "#16a34a",
      customClass: { popup: "swal2-custom-popup" },
      title: "Check your email",
      titleText: "Login Verification",
      color: "#1e2939",
      text: "Your 6-digit code has been sent to your email address.",
      timer: 2000,
      showConfirmButton: false,
      willClose: () => {
        const otp = document.getElementById("loginOtpSection");
        const login = document.getElementById("loginSection");
        if (login) {
          login.classList.add("hidden", "invisible", "pointer-events-none");
          login.style.display = "none";
        }
        if (otp) {
          otp.classList.remove("hidden", "invisible", "pointer-events-none");
          otp.style.display = "flex";
          otp.style.opacity = 0;
          otp.style.transition = "opacity 0.5s";
          setTimeout(() => {
            otp.style.opacity = 1;
          }, 10);
          otp.scrollIntoView({ behavior: "smooth", block: "center" });
        }
      },
    });
  }
}

// Ensure FB SDK is loaded before using FB functions
function fbLogin() {
  if (typeof FB === "undefined") {
    alert(
      "Facebook SDK not loaded. Please check your internet connection and try again."
    );
    return;
  }
  FB.login(
    function (response) {
      if (response.authResponse) {
        FB.api("/me", { fields: "name,email" }, function (profile) {
          if (!profile.email) {
            alert(
              "Unable to retrieve email from Facebook. Please ensure your Facebook account has a verified email."
            );
            return;
          }
          fetch("facebook_register.php", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: `email=${encodeURIComponent(
              profile.email
            )}&name=${encodeURIComponent(profile.name)}`,
          })
            .then((res) => res.text())
            .then((data) => {
              window.location.href = "user-landingpage.php";
            })
            .catch((err) => {
              alert("Error during Facebook login: " + err);
            });
        });
      } else {
        alert("Facebook login was not successful.");
      }
    },
    { scope: "email" }
  );
}

window.fbAsyncInit = function () {
  FB.init({
    appId: "4093222834242920", // Replace with your App ID
    cookie: true,
    xfbml: true,
    version: "v23.0",
  });
};

window.onload = function () {
  const googleBtn = document.getElementById("googleLoginBtn");
  if (googleBtn) {
    googleBtn.addEventListener("click", function () {
      google.accounts.id.initialize({
        client_id:
          "528123102514-o8vap3bmgnogbgvtfuipgkgea739ov3c.apps.googleusercontent.com", // Replace with your Google Client ID
        callback: handleGoogleCredentialResponse,
      });
      google.accounts.id.prompt(); // Shows the Google One Tap prompt
    });
  }
};

function handleGoogleCredentialResponse(response) {
  // Send the credential to your backend for verification and login
  fetch("google_login.php", {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: "credential=" + encodeURIComponent(response.credential),
  })
    .then((res) => res.json())
    .then((data) => {
      if (data.success) {
        window.location.href = "user-landingpage.php";
      } else {
        alert("Google login failed.");
      }
    });
}

// Show OTP section and hide registration
function showOtpSection() {
  // Show SweetAlert2 before showing OTP section with timer, no confirm button
  Swal.fire({
    icon: "success",
    iconColor: "#16a34a",
    customClass: {
      popup: "swal2-custom-popup",
    },
    title: "Check your email",
    titleText: "Email Verification",
    color: "#1e2939",
    text: "Your 6-digit code has been sent to your email address.",
    timer: 2000,
    showConfirmButton: false,
    willClose: () => {
      const otp = document.getElementById("otpSection");
      const reg = document.getElementById("registerSection");
      if (reg) {
        reg.classList.add("hidden", "invisible", "pointer-events-none");
        reg.style.display = "none";
      }
      if (otp) {
        otp.classList.remove("hidden", "invisible", "pointer-events-none");
        otp.style.display = "flex";
        otp.style.opacity = 0;
        otp.style.transition = "opacity 0.5s";
        setTimeout(() => {
          otp.style.opacity = 1;
        }, 10);
        otp.scrollIntoView({ behavior: "smooth", block: "center" });
      }
    },
  });
}

// OTP input auto-focus and form logic
document.addEventListener("DOMContentLoaded", function () {
  const otpInputs = document.querySelectorAll('#otpSection input[type="text"]');
  otpInputs.forEach((input, idx) => {
    input.addEventListener("input", function () {
      if (this.value.length === 1 && idx < otpInputs.length - 1) {
        otpInputs[idx + 1].focus();
      }
    });
    input.addEventListener("keydown", function (e) {
      if (e.key === "Backspace" && !this.value && idx > 0) {
        otpInputs[idx - 1].focus();
      }
    });
  });

  // OTP form submit handler using SweetAlert2
  const otpForm = document.querySelector("#otpSection form");
  if (otpForm) {
    otpForm.addEventListener("submit", function (e) {
      e.preventDefault();
      let otpCode = "";
      otpInputs.forEach((inp) => (otpCode += inp.value));
      if (otpCode.length === 6) {
        Swal.fire({
          icon: "success",
          iconColor: "#16a34a",
          customClass: {
            popup: "swal2-custom-popup",
          },
          title: "Account Created!",
          titleText: "Welcome to GBLDC",
          text: "Your account has been successfully created.",
          color: "#1e2939",
          timer: 2000,
          showConfirmButton: false,
          willClose: () => {
            showLoginSection();
          },
        });
      } else {
        Swal.fire({
          icon: "warning",
          iconColor: "#dc2626",
          title: "Incomplete Code",
          titleText: "Invalid OTP",
          color: "#1e2939",
          text: "Please enter the 6-digit code.",
          confirmButtonColor: "#16a34a",
        });
      }
    });
  }

  // Optional: Resend OTP handler using SweetAlert2
  const resendLink = document.querySelector('#otpSection a[href="#"]');
  if (resendLink) {
    resendLink.addEventListener("click", function (e) {
      e.preventDefault();
      Swal.fire({
        icon: "info",
        iconColor: "#dc2626",
        title: "OTP Resent",
        titleText: "Resend OTP",
        color: "#1e2939",
        text: "A new OTP has been sent to your email.",
        confirmButtonColor: "#16a34a",
      });
    });
  }

  // Forgot Password link logic
  const forgotLink = document.getElementById("forgotPasswordLink");
  if (forgotLink) {
    forgotLink.addEventListener("click", function (e) {
      e.preventDefault();
      showForgotPasswordSection();
    });
  }

  // Handle forgot password form submit
  const forgotForm = document.getElementById("forgotPasswordForm");
  if (forgotForm) {
    forgotForm.addEventListener("submit", function (e) {
      e.preventDefault();
      Swal.fire({
        icon: "success",
        iconColor: "#16a34a",
        customClass: { popup: "swal2-custom-popup" },
        title: "Reset Link Sent",
        text: "A password reset link has been sent to your email address.",
        color: "#1e2939",
        timer: 2000,
        showConfirmButton: false,
        willClose: () => {
          showLoginSection();
        },
      });
    });
  }

  // Realtime update of OTP email hint based on login email input
  const loginEmailInput = document.querySelector(
    '#loginSection input[type="email"]'
  );
  const otpEmailHint = document.getElementById("otpEmailHint");
  if (loginEmailInput && otpEmailHint) {
    loginEmailInput.addEventListener("input", function () {
      const email = loginEmailInput.value.trim();
      if (email) {
        otpEmailHint.textContent = `Code sent to: ${email}`;
      } else {
        otpEmailHint.textContent = "Example: juandelacruz@gmail.com";
      }
    });
  }

  // OTP input auto-focus and form logic for login OTP
  const loginOtpInputs = document.querySelectorAll(
    '#loginOtpSection input[type="text"]'
  );
  loginOtpInputs.forEach((input, idx) => {
    input.addEventListener("input", function () {
      if (this.value.length === 1 && idx < loginOtpInputs.length - 1) {
        loginOtpInputs[idx + 1].focus();
      }
    });
    input.addEventListener("keydown", function (e) {
      if (e.key === "Backspace" && !this.value && idx > 0) {
        loginOtpInputs[idx - 1].focus();
      }
    });
  });

  // OTP form submit handler using SweetAlert2
  const loginOtpForm = document.getElementById("loginOtpForm");
  if (loginOtpForm) {
    loginOtpForm.addEventListener("submit", function (e) {
      e.preventDefault();
      let otpCode = "";
      loginOtpInputs.forEach((inp) => (otpCode += inp.value));
      if (otpCode.length === 6) {
        Swal.fire({
          icon: "success",
          iconColor: "#16a34a",
          customClass: { popup: "swal2-custom-popup" },
          title: "Login Successful!",
          text: "Discover your financial future with GBLDC. Welcome User!",
          color: "#1e2939",
          timer: 2000,
          showConfirmButton: false,
          willClose: () => {
            window.location.href = "user-landingpage.php"; // Redirect to user landing page
          },
        });
      } else {
        Swal.fire({
          icon: "warning",
          iconColor: "#dc2626",
          title: "Incomplete Code",
          titleText: "Invalid OTP",
          color: "#1e2939",
          text: "Please enter the 6-digit code.",
          confirmButtonColor: "#16a34a",
        });
      }
    });
  }

  // Resend OTP handler for login OTP
  const loginResendLink = document.getElementById("loginOtpResend");
  if (loginResendLink) {
    loginResendLink.addEventListener("click", function (e) {
      e.preventDefault();
      let timerInterval;
      Swal.fire({
        icon: "info",
        iconColor: "#16a34a",
        title: "OTP Resent",
        titleText: "Resend OTP",
        color: "#1e2939",
        text: "A new OTP has been sent to your email.",
        confirmButtonColor: "#16a34a",
        showConfirmButton: false,
        timer: 2000,
        timerProgressBar: true,
        willClose: () => {
          clearInterval(timerInterval);
        },
      });
    });
  }
});
</script>
</body>
</html>